<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <title>Artificial Metacognition — M‑Stack (v1.2)</title>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="description" content="M‑Stack: a reliability architecture that gives AI systems the ability to know when they're wrong."/>
  <meta name="author" content="AI Reliability Research Group"/>
  <meta name="robots" content="index,follow"/>

  <!-- Canonical + OG (absolute URLs for GitHub Pages /mstack/) -->
  <link rel="canonical" href="https://apmorey93.github.io/mstack/"/>
  <meta property="og:title" content="Artificial Metacognition — M‑Stack (v1.2)"/>
  <meta property="og:description" content="A reliability architecture that knows when to slow down, verify, or abstain."/>
  <meta property="og:type" content="website"/>
  <meta property="og:url" content="https://apmorey93.github.io/mstack/"/>
  <meta property="og:image" content="https://apmorey93.github.io/mstack/assets/figures/cover_og.png"/>
  <meta name="theme-color" content="#0b0f17"/>

  <!-- Favicons (add PNG fallback at assets/figures/favicon.png) -->
  <link rel="icon" href="assets/figures/favicon.svg" type="image/svg+xml"/>
  <link rel="icon" href="assets/figures/favicon.png" sizes="any" type="image/png"/>

  <!-- Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com"/>
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin/>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700;800&family=Fira+Code:wght@400;500&display=swap" rel="stylesheet"/>

  <link rel="stylesheet" href="assets/styles.custom.css">
</head>
<body>
  <a href="#main" class="skip">Skip to content</a>
  <div class="bg" aria-hidden="true"></div>
  <div class="bg2" aria-hidden="true"></div>
  <div class="scanline" aria-hidden="true"></div>

  <!-- Header -->
  <div class="top">
    <div class="wrap nav">
      <a class="brand" href="./index.html" aria-label="Artificial Metacognition home">
        <div class="logo">M</div>
        <div>
          <div class="brand-title">Artificial Metacognition</div>
          <div class="brand-sub">M‑Stack • Reliability for AI</div>
        </div>
      </a>
      <div class="group">
        <a class="btn ghost" href="./evidence.html">Evidence</a>
        <a class="btn" href="https://github.com/apmorey93/mstack" target="_blank" rel="noopener noreferrer">GitHub</a>
      </div>
    </div>
  </div>

  <!-- Hero -->
  <header class="hero wrap glass reveal" id="main" role="banner">
    <span class="eyebrow">Whitepaper • v1.2</span>
    <h1 class="title">AI that knows when it’s wrong</h1>
    <p class="lede">M‑Stack wraps any model with a metacognitive layer that can monitor uncertainty, verify claims, and <em>abstain</em> when evidence is weak — converting raw capability into <strong>auditable reliability</strong>.</p>
    <div class="cta">
      <a class="primary" href="./evidence.html">View Evidence & Benchmarks</a>
      <a class="ghost" href="#summary">Read the Summary</a>
    </div>
    <div class="chips" aria-hidden="true">
      <div class="chip" data-countup="60" data-suffix="%">≈60% fewer hallucinations</div>
      <div class="chip">↓ AURC • ↑ calibration</div>
      <div class="chip">Audit‑ready logs</div>
    </div>
  </header>

  <!-- Content -->
  <main class="wrap-main">
    <section id="summary" class="grid">
      <!-- Main panel -->
      <article class="panel glass reveal">
        <h2>What is M‑Stack?</h2>
        <p>A four‑layer reliability architecture — <strong>Monitor → Evaluate → Control → Learn</strong> — that supervises generation, scores quality and grounding, chooses actions (<em>verify, revise, abstain, emit</em>), and adapts its thresholds over time.</p>

        <div class="cards">
          <div class="card"><h3>Monitor</h3><p>Entropy, disagreement, and contradiction checks identify risky outputs before they escape.</p></div>
          <div class="card"><h3>Evaluate</h3><p>Judge/PRM scoring plus citation alignment to detect unsupported claims in RAG.</p></div>
          <div class="card"><h3>Control</h3><p>CMDP policy enforces risk caps and budgets: verify, abstain, or emit with a rationale.</p></div>
        </div>

        <!-- Animated M‑Stack Diagram -->
        <div class="diagram">
          <svg viewBox="0 0 800 360" xmlns="http://www.w3.org/2000/svg" aria-label="M‑Stack Loop">
            <defs>
              <linearGradient id="g1" x1="0" x2="1">
                <stop offset="0%" stop-color="#22d3ee"/>
                <stop offset="100%" stop-color="#60a5fa"/>
              </linearGradient>
              <filter id="softGlow" x="-30%" y="-30%" width="160%" height="160%">
                <feGaussianBlur stdDeviation="3" result="b"/>
                <feMerge><feMergeNode in="b"/><feMergeNode in="SourceGraphic"/></feMerge>
              </filter>
            </defs>
            <!-- Center model -->
            <rect x="300" y="130" width="200" height="100" rx="12" fill="rgba(255,255,255,0.03)" stroke="rgba(255,255,255,0.18)"/>
            <text x="400" y="175" fill="#dbeafe" text-anchor="middle" font-weight="700">Foundation Model</text>
            <text x="400" y="196" fill="#9aa3b2" text-anchor="middle" font-size="12">(Black Box)</text>

            <!-- M1 -->
            <rect class="pulse" id="m1" x="325" y="14" width="150" height="70" rx="10" fill="rgba(34,211,238,0.12)" stroke="url(#g1)" filter="url(#softGlow)"/>
            <text x="400" y="42" fill="#e6e9f0" text-anchor="middle" font-weight="700">M1: Monitor</text>
            <text x="400" y="60" fill="#9aa3b2" text-anchor="middle" font-size="12">Uncertainty • Contradiction</text>

            <!-- M2 -->
            <rect class="pulse" id="m2" x="600" y="140" width="160" height="70" rx="10" fill="rgba(34,211,238,0.12)" stroke="url(#g1)" filter="url(#softGlow)"/>
            <text x="680" y="168" fill="#e6e9f0" text-anchor="middle" font-weight="700">M2: Evaluate</text>
            <text x="680" y="186" fill="#9aa3b2" text-anchor="middle" font-size="12">Factuality • Quality</text>

            <!-- M3 -->
            <rect class="pulse" id="m3" x="325" y="276" width="150" height="70" rx="10" fill="rgba(34,211,238,0.12)" stroke="url(#g1)" filter="url(#softGlow)"/>
            <text x="400" y="304" fill="#e6e9f0" text-anchor="middle" font-weight="700">M3: Control</text>
            <text x="400" y="322" fill="#9aa3b2" text-anchor="middle" font-size="12">Verify • Revise • Abstain • Emit</text>

            <!-- M4 -->
            <rect class="pulse" id="m4" x="40" y="140" width="160" height="70" rx="10" fill="rgba(34,211,238,0.12)" stroke="url(#g1)" filter="url(#softGlow)"/>
            <text x="120" y="168" fill="#e6e9f0" text-anchor="middle" font-weight="700">M4: Learn</text>
            <text x="120" y="186" fill="#9aa3b2" text-anchor="middle" font-size="12">Calibrate • Adapt</text>

            <!-- Arrows -->
            <g stroke="#7dd3fc" stroke-width="1.5" fill="none" opacity=".7">
              <path d="M 475 45 C 550 45, 585 95, 600 140"/>
              <path d="M 600 210 C 585 260, 550 300, 475 310"/>
              <path d="M 325 310 C 250 310, 210 260, 200 210"/>
              <path d="M 200 140 C 210 95, 250 45, 325 45"/>
            </g>
          </svg>
        </div>
      </article>

      <!-- Side panel -->
      <aside class="panel glass reveal">
        <h2>Quick links</h2>
        <nav class="toc toc-col" aria-label="Quick Links">
          <a href="./evidence.html"><span class="dot"></span>&nbsp;Evidence & Benchmarks</a>
          <a href="#summary"><span class="dot"></span>&nbsp;Summary</a>
          <a href="https://github.com/apmorey93/mstack" target="_blank" rel="noopener noreferrer"><span class="dot"></span>&nbsp;GitHub Repository</a>
        </nav>

        <div class="card card-compact">
          <h3 class="small-strong">For regulators & auditors</h3>
          <p class="small-muted">M‑Stack produces tamper‑evident traces (confidence, contradictions, abstention rationales) designed for audits and incident reviews.</p>
        </div>

        <div class="card card-compact">
          <h3 class="small-strong">Contact</h3>
          <p class="small-muted">AI Reliability Research Group<br>
            <a href="mailto:info@metacognition.ai">info@metacognition.ai</a></p>
        </div>
      </aside>
    </section>
  </main>

  <footer class="wrap reveal" style="margin-bottom: 40px;">
    <div class="glass panel footer-panel">
      <div style="color:var(--muted);">© 2025 AI Reliability Research Group</div>
      <div style="display:flex; gap:12px;">
        <a class="btn ghost btn-compact" href="./evidence.html">Evidence</a>
        <a class="btn ghost btn-compact" href="https://github.com/apmorey93/mstack" target="_blank" rel="noopener noreferrer">GitHub</a>
      </div>
    </div>
  </footer>

  <script>
    // ===== Parallax tilt on mouse (very subtle) =====
    (function() {
      const prefersReduced = window.matchMedia('(prefers-reduced-motion: reduce)').matches;
      if (prefersReduced) return;
      const hero = document.querySelector('.hero');
      if (!hero) return;
      hero.addEventListener('mousemove', (e) => {
        const r = hero.getBoundingClientRect();
        const cx = (e.clientX - r.left) / r.width - 0.5;
        const cy = (e.clientY - r.top) / r.height - 0.5;
        hero.style.transform = `perspective(1000px) rotateX(${(-cy*1.2).toFixed(2)}deg) rotateY(${(cx*1.2).toFixed(2)}deg)`;
      });
      hero.addEventListener('mouseleave', () => {
        hero.style.transform = 'none';
      });
    })();

    // ===== Scroll-reveal (gentle) =====
    (function() {
      const prefersReduced = window.matchMedia('(prefers-reduced-motion: reduce)').matches;
      const els = document.querySelectorAll('.reveal');
      if (prefersReduced) { els.forEach(el => el.classList.add('is-visible')); return; }
      const io = new IntersectionObserver((entries) => {
        entries.forEach(e => { if (e.isIntersecting) { e.target.classList.add('is-visible'); io.unobserve(e.target); } });
      }, { threshold: 0.1, rootMargin: '0px 0px -10% 0px' });
      els.forEach(el => io.observe(el));
    })();

    // ===== Count‑up chips when visible =====
    (function() {
      const el = document.querySelector('[data-countup]');
      if (!el) return;
      const target = parseFloat(el.getAttribute('data-countup')) || 60;
      const suffix = el.getAttribute('data-suffix') || '%';
      let started = false;
      const run = () => {
        if (started) return; started = true;
        const t0 = performance.now();
        const dur = 1200; // ms
        const step = (now) => {
          const k = Math.min(1, (now - t0) / dur);
          const e = 1 - Math.pow(1 - k, 3); // easeOutCubic
          el.textContent = `≈${Math.round(e * target)}${suffix} fewer hallucinations`;
          if (k < 1) requestAnimationFrame(step);
        };
        requestAnimationFrame(step);
      };
      const io = new IntersectionObserver((ents)=>{ if (ents[0].isIntersecting) { run(); io.disconnect(); } });
      io.observe(el);
    })();

    // ===== M‑Stack diagram pulsing sequence on enter =====
    (function() {
      const prefersReduced = window.matchMedia('(prefers-reduced-motion: reduce)').matches;
      const boxes = ['#m1','#m2','#m3','#m4'].map(q=>document.querySelector(q)).filter(Boolean);
      if (!boxes.length) return;
      const seq = () => {
        boxes.forEach(b => b.classList.remove('is-on'));
        let i = 0;
        const tick = () => {
          boxes.forEach(b => b.classList.remove('is-on'));
          boxes[i].classList.add('is-on');
          i = (i + 1) % boxes.length;
          if (!prefersReduced) timer = setTimeout(tick, 900);
        };
        let timer = setTimeout(tick, 200);
      };
      const io = new IntersectionObserver((ents)=>{ if (ents[0].isIntersecting) { seq(); io.disconnect(); } }, { threshold: 0.2 });
      io.observe(document.querySelector('.diagram'));
    })();
  </script>
</body>
</html>
